<!DOCTYPE html>
<html layout:decorate="~{layouts/admin/main}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">

    <main layout:fragment="content">
        <form autocomplete="off" method="post" name="frmJoin" th:action="@{/baseinfo/coninfo}" th:object="${conInfoVO}">
            계약정보 페이지
            <div>
                <input id="clnt_cd" readonly th:field="*{clntCd}" th:placeholder="#{clntCd}"
                       th:style="'background:#D8D8D8'" type="text"/>
                <input id="clnt_tmp" list="clnt" name="clnt_tmp" th:placeholder="#{clntNm}" type="text"/>
                <datalist id="clnt">
                    <select id="clnt_sel">
                        <option th:each="clnt : ${clntList}" th:label="${clnt.clntCd}" th:value="${clnt.clntNm}">
                        </option>
                    </select>
                </datalist>
            </div>
            <script>
            document.addEventListener('DOMContentLoaded', function() {
                const clnt = document.getElementById("clnt_tmp");

                var selected = document.querySelector("select#clnt_sel")

                clnt.addEventListener("change", UpdateClnt)
             });


            function UpdateClnt(e) {
                var evnt = e.currentTarget;
                var selected = document.querySelector("select#clnt_sel")
                var datalist = evnt.list;
                var clntcd = document.getElementById("clnt_cd");

                for(var j = 0; j < datalist.options.length; j++){
                    if(this.value == datalist.options[j].value) {
                        clntcd.value = datalist.options[j].label;
                    }
                }
            }
            </script>
            <div>
                <input name="mMin" th:field="*{mMin}" th:placeholder="#{mMin}" type="number">
                <div class="errors" th:each="err : ${#fields.errors('mMin')}" th:text="${err}"></div>
            </div>
            <div>
                <input name="pltFee" th:field="*{pltFee}" th:placeholder="#{pltFee}" type="text">
                <div class="errors" th:each="err : ${#fields.errors('pltFee')}" th:text="${err}"></div>
            </div>
            <div>
                <input name="transSdt" th:field="*{transSdt}" th:placeholder="#{transSdt}" type="text">
                <div class="errors" th:each="err : ${#fields.errors('transSdt')}" th:text="${err}"></div>
            </div>
            <div>
                <input name="transEdt" th:field="*{transEdt}" th:placeholder="#{transEdt}" type="text">
            </div>
            <div>
                <input name="remk" th:field="*{remark}" th:placeholder="#{remk}" type="text">
            </div>
            <button th:text="#{conInfo.action.submit}" type="submit"></button>
        </form>
    </main>
</html>