<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/admin/main}">

  <main layout:fragment="content">
    <form name="itemInfo" method="post" th:action="@{/baseinfo/iteminfo}" th:object="${itemInfoVO}" autocomplete="off">
      <div>
        <input type="text" th:field="*{waCtrCd}" th:placeholder="#{waCtrCd}">
      </div>

        <div>
            <input type="text" id="clnt_cd" th:field="*{clntCd}" th:placeholder="#{clntCd}" th:style="'background:#D8D8D8'" readonly/>
            <input type="text" list="clnt" id="clnt_tmp" name="clnt_tmp" th:placeholder="#{clntNm}"/>
            <datalist id="clnt">
                <select id="clnt_sel">
                    <option th:each="clnt : ${clntList}" th:label="${clnt.clntCd}" th:value="${clnt.clntNm}">
                    </option>
                </select>
            </datalist>
        </div>
        <script>
			document.addEventListener('DOMContentLoaded', function() {
				const clnt = document.getElementById("clnt_tmp");

				var selected = document.querySelector("select#clnt_sel")

				clnt.addEventListener("change", UpdateClnt)
			});


			function UpdateClnt(e) {
				var evnt = e.currentTarget;
				var selected = document.querySelector("select#clnt_sel")
				var datalist = evnt.list;
				var clntcd = document.getElementById("clnt_cd");

				for(var j = 0; j < datalist.options.length; j++){
					if(this.value == datalist.options[j].value) {
						clntcd.value = datalist.options[j].label;
					}
				}
			}
		</script>

      <div>
        <input type="text" th:field="*{locCd}" th:placeholder="#{locCd}">
      </div>
      <div>
        <input type="text" th:field="*{itemCd}" th:placeholder="#{itemCd}">
      </div>
      <div>
        <input type="text" th:field="*{itemNm}" th:placeholder="#{itemNm}">
      </div>
      <div>
        <select th:field="*{boxUnit}" th:value="*{boxUnit}">
          <option value="">관리단위</option>
          <option th:each="code : ${codeList}" th:value="${code.itemCode}" th:text="${code.itemValue}"></option>
        </select>
      </div>
      <div>
        <input type="number" th:field=*{pltInBox} th:placeholder="#{pltInBox}">
      </div>
      <div>
        <input type="text" th:field="*{remk}" th:placeholder="#{remk}">
      </div>
      <button type="submit">저장하기</button>
    </form>
  </main>
</html>